<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Library Tracker</title>
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="styles/base.css" />
  <link rel="stylesheet" href="styles/shelves.css" />
  <link rel="stylesheet" href="styles/modal.css" />
  <link rel="stylesheet" href="styles/handsfree.css" />
</head>
<body>
  <header class="app-header">
    <h1>Library Tracker</h1>
    <div class="controls">
      <select id="sort-select" aria-label="Sort books" title="Sort">
        <option value="series" selected>Series (Aâ€“Z)</option>
        <option value="title">Title (Aâ€“Z)</option>
        <option value="author">Author (Aâ€“Z)</option>
        <option value="genre">Genre (Aâ€“Z)</option>
      </select>
      <div class="search-wrap">
        <input id="search-input" type="search" placeholder="Search booksâ€¦" aria-label="Search books" />
        <button id="btn-clear-search" class="icon small" aria-label="Clear search" title="Clear search" hidden>âœ•</button>
        <span id="results-count" class="results-count" aria-live="polite"></span>
      </div>
      <div class="isbn-inline" style="display:flex;gap:6px;align-items:center">
        <input id="isbn-input" type="text" inputmode="numeric" pattern="[-0-9Xx ]+" placeholder="Enter ISBNâ€¦" aria-label="Enter ISBN" />
        <button id="btn-add" aria-label="Add ISBN">Add</button>
      </div>
      <button id="btn-scan" aria-label="Open scanner">Scan</button>
      <button id="toggle-handsfree" aria-pressed="false" aria-label="Motion cursor" title="Motion cursor">âœ‹</button>
      <button id="toggle-voice" aria-pressed="false" aria-label="Voice" title="Voice">ðŸŽ¤</button>
      
      <div class="menu" id="hamburger">
        <button class="menu-toggle" aria-label="Menu" aria-expanded="false" aria-haspopup="true">â˜°</button>
        <div class="menu-list" role="menu">
          <button id="btn-import" role="menuitem">Import</button>
          <button id="btn-export" role="menuitem">Export</button>
          <button id="btn-settings" role="menuitem">Settings</button>
        </div>
      </div>
      <input id="file-import" type="file" accept="application/json" style="display:none" />
    </div>
  </header>

  <main>
    <section id="shelves" aria-live="polite"></section>
  </main>

  <div id="book-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true"></div>
  <div id="scanner-overlay" hidden></div>
  <div id="handsfree-overlay" hidden>
    <div id="hf-cursor" class="hf-cursor" aria-hidden="true"></div>
  </div>
  <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- Settings Panel -->
  <div id="settings-panel" hidden></div>

  <!-- External libraries -->
  <!-- idb loaded via dynamic import in db.js to avoid MIME/CORS issues -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

  <!-- Our scripts -->
  <script src="js/utils.js"></script>
  <script src="js/db.js"></script>
  <script src="js/api.js"></script>
  <script src="js/shelves.js"></script>
  <script src="js/modal.js"></script>
  <script src="js/barcode.js"></script>
  <script src="js/search.js"></script>
  <script src="js/importExport.js"></script>
  <script src="js/handsfree.js"></script>
  <script src="js/voice.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/migrate.js"></script>
  <script src="js/main.js"></script>
  <!-- Pager controls -->
  <div id="pager" class="pager" aria-label="Pagination controls" hidden>
    <button id="btn-prev-page" class="pager-btn" aria-label="Previous page" title="Previous page">âŸ¨</button>
    <button id="btn-next-page" class="pager-btn" aria-label="Next page" title="Next page">âŸ©</button>
  </div>
</body>
</html>
